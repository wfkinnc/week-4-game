<DOCTYPE! html>
<html>
<head>
<title>Week 4 Gem Game</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
<link rel="stylesheet" type="text/css" href="assets/css/style.css">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

<style>
  .crystal-image{
    width: 150px;
    height: 150px;
    margin: 0 auto;
  }

  .random-score{
    font-size: 25px;
    text-align: center;0
  }

</style> 
<script src="https://code.jquery.com/jquery.js"></script>
<script>
  var totalScore    = 0;
  var randomNumberTarget;
  var numWins       = 0;
  var numLosses     = 0

  $(document).ready(function(){

    // initializes the game when the page loads
    setUpGame(0);

  $(".crystal-image").on("click", function(){
    totalScore = totalScore + parseInt($(this).attr("data-random"),10);
    setCurrentScore(totalScore);
    // Compares totalScore to randomNumberTArger
    // if less than, keep playing
    // if equal, then 
    // a. inccrment wins counter
    // b. reset counts and get new Target #
    // if greater than, then
    // a. increment lose counter
    // b. reset ounts and get new Target #
    if (totalScore == randomNumberTarget ){
    console.log( "win " + totalScore + " " + randomNumberTarget);
      //wins
      numWins++;
      $("#number-wins").html(numWins);
      setUpGame(1);
    } else if (totalScore >    randomNumberTarget){
      //loses
      console.log("loss " + totalScore + " " + randomNumberTarget);
      numLosses++;
      $("#number-losses").html(numLosses);
      setUpGame(1);
    }


  });// end on


}) // ends document.ready...

function setUpGame(numberOfPLays){
  // sets the game up for the first run with:
  // random # per gem
  // total Random # 
  var randomNumberGem;
  //if (numberOfPLays ===0){
    //assigns random # of each gem
    for (var x = 0; x < 4; x++){

      randomNumberGem = generateRandomNum(1,12);
      //assigns randomNumber of the Gem
      $( ".crystal-image" ).each( function( index, element ){
          $( this ).attr("data-random",randomNumberGem );
            console.log(x + " " + randomNumberGem)
      }); // end .each 

    }// end for
 // }// end  if (numbereOfPlay)

  // Creates Random Number as Target
  randomNumberTarget = generateRandomNum(19,120);
  $("#random-score-value").html(randomNumberTarget);
  //resetting total score
  totalScore = 0;
  setCurrentScore(totalScore);
}//end setUpGAme

function setCurrentScore(passedScore){
  // resets the score
  $("#current-score-value").html(passedScore);


} 

function generateRandomNum(passMin,passMax){

  min = Math.ceil(passMin);
  max = Math.floor(passMax);
  return Math.floor(Math.random() * (passMax - passMin + 1)) + passMin; //The maximum is inclusive and the minimum is inclusive 

} // end fcn 

</script>

</head>

<body>


  <div class="container-fluid">
       <div class="row" id="firstRow">
          <div class="jumbotron">
            <h1 class="display-5">CrystalsCollector!</h1>
            <p class="lead">You will be given a random number at the start of the game.</p>
            <p class="lead">You win the game by matching your total score to random number, you loose the game if your total score goes above the random number.</p>
            <p class="lead">The value of each crystal is hiddent from you until you click on it.</p>
            <p class="lead">Each time when the game starts, the game will change the values of each crystal.</p>
          </div>

      </div> 
      <div class="row justify-content-sm-center" id="secondRow">

          <div class="col-sm-4  random-score">
          Your Random Number to match is: <span id="random-score-value">0</span>
          </div>
          <div class="col-sm-4 random-score" id="numCurrentPoints">
          Your total score is: <span id="current-score-value">0</span>
          </div>
          <div class="col-sm-4 random-score" id="numWinsLosses">
              Wins: <span id="number-wins">0</span> and 
              Losses: <span id="number-losses">0</span>
          </div>


      </div>
      <div class="row justify-content-md-center" id="thirdRow">

                <img class="crystal-image float-left" src="assets/images/blue_diamond.png" id="blueDiamond"></img>
               <img class="crystal-image float-left" src="assets/images/green_peridot.png" id="greenPeridot"></img>
              <img class="crystal-image float-left" src="assets/images/green_stone.jpg" id="greenStone"></img>
              <img class="crystal-image float-left" src="assets/images/red_ruby.png" id="redRuby"></img>

      </div> 

</div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</body>
</html>